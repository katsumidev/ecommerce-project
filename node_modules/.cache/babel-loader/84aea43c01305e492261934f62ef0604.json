{"ast":null,"code":"var _jsxFileName = \"/home/eveprice/Documentos/React/ecommerce/client/src/pages/DetailsPage/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { BsGeoAlt, RiTruckLine } from \"../../styles/Icons\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport cep from \"cep-promise\";\nimport ProductCard from \"../../components/ProductCard\";\nimport { Container, PictureWrapper, ProductInfo, SellerInfoWrapper, SellerInfo, Picture, DeliveryInfo, BuyNowBtn, AddToCartBtn, Delivery, Description, BuyBtns, SimilarProducts, ProductsList } from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction DetailsPage() {\n  _s();\n\n  const [productData, setProductData] = useState({});\n  const [similarProducts, setSimilarProducts] = useState({\n    data: []\n  });\n  const [logged, setLogged] = useState(false);\n  const [userData, setUserData] = useState({});\n  const [locationInfo, setLocationInfo] = useState({});\n  const [buyQuantity, setBuyQuantity] = useState(1);\n  const {\n    productId\n  } = useParams();\n  useEffect(() => {\n    fetch(`http://localhost:3000/product/consult?id=${productId}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 404:\n          console.log(\"Produto não encontrado\");\n          break;\n\n        case 200:\n          setProductData(data);\n          break;\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(\"http://localhost:3000/auth/consult\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n      }\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setLogged(!logged);\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetch(`http://localhost:3000/product/consult_similar_products?category=${productData.category}&id=${productId}`, {\n      method: \"get\"\n    }).then(async res => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setSimilarProducts({\n            data: data\n          });\n          break;\n      }\n    });\n  }, [productData]);\n\n  function addToCart() {\n    if (logged) {\n      fetch(\"http://localhost:3000/cart/addToCart\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        },\n        body: JSON.stringify({\n          productId: productId,\n          quantity: buyQuantity\n        })\n      }).then(async res => {\n        switch (res.status) {\n          case 200:\n            alert(\"Item adicionado ao carrinho!\", res);\n            break;\n        }\n      });\n    } else {\n      alert('Logue para usar o carrinho!');\n    }\n  }\n\n  useEffect(() => {\n    cep(userData.cep).then(res => {\n      setLocationInfo(res);\n    });\n  }, [userData]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(PictureWrapper, {\n      children: /*#__PURE__*/_jsxDEV(Picture, {\n        enlargedImageContainerClassName: \"large-image\",\n        hoverDelayInMs: 0,\n        smallImage: {\n          src: productData.image,\n          width: 480,\n          height: 480\n        },\n        largeImage: {\n          src: productData.image,\n          width: 1200,\n          height: 1800\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductInfo, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: productData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Rating, {\n        name: \"half-rating\",\n        defaultValue: productData.rating\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"R$ \", productData.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: `em ${productData.portion}x R$${(productData.price / productData.portion).toFixed(2)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Marca: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: productData.brand\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Categoria: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: productData.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Tags: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), productData.tags != undefined ? productData.tags.map((t, index) => {\n            return /*#__PURE__*/_jsxDEV(\"span\", {\n              children: (index ? \", \" : \"\") + t\n            }, `${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 24\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SellerInfoWrapper, {\n      children: /*#__PURE__*/_jsxDEV(SellerInfo, {\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"R$ \", productData.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: productData.deliveryPrice > 0 ? /*#__PURE__*/_jsxDEV(DeliveryInfo, {\n              children: [/*#__PURE__*/_jsxDEV(RiTruckLine, {\n                size: 25\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Entrega: R$ \", productData.deliveryPrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(DeliveryInfo, {\n              children: [/*#__PURE__*/_jsxDEV(RiTruckLine, {\n                size: 25,\n                fill: \"#d7263d\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Entrega \", /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: \"GR\\xC1TIS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(DeliveryInfo, {\n              children: [/*#__PURE__*/_jsxDEV(BsGeoAlt, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), logged ? /*#__PURE__*/_jsxDEV(Delivery, {\n                children: userData.cep ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Enviar para \", userData.name, \",\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: locationInfo.city\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 27\n                    }, this), \" \", locationInfo.cep]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Cadastre um endere\\xE7o!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/login\",\n                  children: \"Entre ou se cadastre!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: productData.countInStock > 0 ? /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Em estoque!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Fora de estoque.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: productData.countInStock > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Quantidade:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: e => setBuyQuantity(e.target.text),\n                className: \"quantity\",\n                children: Array.from(Array(productData.countInStock).keys()).map(i => {\n                  return i > 0 && i < 6 && /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: i\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 50\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n                children: [\"(\", productData.countInStock, \" em estoque!)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(BuyBtns, {\n              children: [/*#__PURE__*/_jsxDEV(BuyNowBtn, {\n                type: \"button\",\n                value: \"Comprar agora\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AddToCartBtn, {\n                type: \"button\",\n                value: \"Adicionar ao carrinho\",\n                onClick: () => addToCart()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Description, {\n      children: productData.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SimilarProducts, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Produtos semelhantes que voc\\xEA pode gostar:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductsList, {\n        children: similarProducts.data.slice(0, 4).map(p => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(ProductCard, {\n              imgsrc: p.image,\n              title: p.name,\n              brand: p.brand,\n              price: `R$ ${p.price}`,\n              portion: `${p.portion}x R$${(p.price / p.portion).toFixed(2)} sem juros`\n            }, p._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DetailsPage, \"K/WIGM7G0gmFFMh/iLxk+kMxppc=\", false, function () {\n  return [useParams];\n});\n\n_c = DetailsPage;\nexport default DetailsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DetailsPage\");","map":{"version":3,"sources":["/home/eveprice/Documentos/React/ecommerce/client/src/pages/DetailsPage/index.js"],"names":["React","useEffect","useState","Link","useNavigate","useParams","BsGeoAlt","RiTruckLine","Rating","cep","ProductCard","Container","PictureWrapper","ProductInfo","SellerInfoWrapper","SellerInfo","Picture","DeliveryInfo","BuyNowBtn","AddToCartBtn","Delivery","Description","BuyBtns","SimilarProducts","ProductsList","DetailsPage","productData","setProductData","similarProducts","setSimilarProducts","data","logged","setLogged","userData","setUserData","locationInfo","setLocationInfo","buyQuantity","setBuyQuantity","productId","fetch","method","headers","Accept","then","res","json","status","console","log","Authorization","localStorage","getItem","category","addToCart","body","JSON","stringify","quantity","alert","smallImage","src","image","width","height","largeImage","name","rating","price","portion","toFixed","brand","tags","undefined","map","t","index","deliveryPrice","city","countInStock","e","target","text","Array","from","keys","i","description","slice","p","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { BsGeoAlt, RiTruckLine } from \"../../styles/Icons\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport cep from \"cep-promise\";\nimport ProductCard from \"../../components/ProductCard\";\nimport {\n  Container,\n  PictureWrapper,\n  ProductInfo,\n  SellerInfoWrapper,\n  SellerInfo,\n  Picture,\n  DeliveryInfo,\n  BuyNowBtn,\n  AddToCartBtn,\n  Delivery,\n  Description,\n  BuyBtns,\n  SimilarProducts,\n  ProductsList,\n} from \"./styles\";\n\nfunction DetailsPage() {\n  const [productData, setProductData] = useState({});\n  const [similarProducts, setSimilarProducts] = useState({ data: [] });\n  const [logged, setLogged] = useState(false);\n  const [userData, setUserData] = useState({});\n  const [locationInfo, setLocationInfo] = useState({});\n  const [buyQuantity, setBuyQuantity] = useState(1);\n  const { productId } = useParams();\n\n  useEffect(() => {\n    fetch(`http://localhost:3000/product/consult?id=${productId}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 404:\n          console.log(\"Produto não encontrado\");\n          break;\n        case 200:\n          setProductData(data);\n          break;\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    fetch(\"http://localhost:3000/auth/consult\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n      },\n    }).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setLogged(!logged);\n          setUserData(data);\n          break;\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    fetch(\n      `http://localhost:3000/product/consult_similar_products?category=${productData.category}&id=${productId}`,\n      {\n        method: \"get\",\n      }\n    ).then(async (res) => {\n      let data = await res.json();\n\n      switch (res.status) {\n        case 200:\n          setSimilarProducts({ data: data });\n          break;\n      }\n    });\n  }, [productData]);\n\n  function addToCart() {\n    if (logged) {\n      fetch(\"http://localhost:3000/cart/addToCart\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n        },\n        body: JSON.stringify({\n          productId: productId,\n          quantity: buyQuantity,\n        }),\n      }).then(async (res) => {\n        switch (res.status) {\n          case 200:\n            alert(\"Item adicionado ao carrinho!\", res);\n            break;\n        }\n      });\n    } else {\n      alert('Logue para usar o carrinho!')\n    }\n  }\n\n  useEffect(() => {\n    cep(userData.cep).then((res) => {\n      setLocationInfo(res);\n    });\n  }, [userData]);\n\n  return (\n    <Container>\n      <PictureWrapper>\n        <Picture\n          enlargedImageContainerClassName=\"large-image\"\n          hoverDelayInMs={0}\n          {...{\n            smallImage: {\n              src: productData.image,\n              width: 480,\n              height: 480,\n            },\n            largeImage: {\n              src: productData.image,\n              width: 1200,\n              height: 1800,\n            },\n          }}\n        />\n      </PictureWrapper>\n      <ProductInfo>\n        <h2>{productData.name}</h2>\n        <Rating name=\"half-rating\" defaultValue={productData.rating} />\n        <h1>R$ {productData.price}</h1>\n        <h4>{`em ${productData.portion}x R$${(\n          productData.price / productData.portion\n        ).toFixed(2)}`}</h4>\n        <hr />\n        <ul>\n          <li>\n            <strong>Marca: </strong>\n            <span>{productData.brand}</span>\n          </li>\n          <li>\n            <strong>Categoria: </strong>\n            <span>{productData.category}</span>\n          </li>\n          <li>\n            <strong>Tags: </strong>\n            {productData.tags != undefined ? (\n              productData.tags.map((t, index) => {\n                return <span key={`${index}`}>{(index ? \", \" : \"\") + t}</span>;\n              })\n            ) : (\n              <></>\n            )}\n          </li>\n        </ul>\n      </ProductInfo>\n      <SellerInfoWrapper>\n        <SellerInfo>\n          <ul>\n            <li>\n              <h2>R$ {productData.price}</h2>\n            </li>\n            <li>\n              {productData.deliveryPrice > 0 ? (\n                <DeliveryInfo>\n                  <RiTruckLine size={25} />\n                  <p>Entrega: R$ {productData.deliveryPrice}</p>\n                </DeliveryInfo>\n              ) : (\n                <DeliveryInfo>\n                  <RiTruckLine size={25} fill=\"#d7263d\" />\n                  <p>\n                    Entrega <a>GRÁTIS</a>\n                  </p>\n                </DeliveryInfo>\n              )}\n            </li>\n            <li>\n              <DeliveryInfo>\n                <BsGeoAlt size={20} />\n                {logged ? (\n                  <Delivery>\n                    {userData.cep ? (\n                      <>\n                        <p>Enviar para {userData.name},</p>\n                        <p>\n                          <b>{locationInfo.city}</b> {locationInfo.cep}\n                        </p>\n                      </>\n                    ) : (\n                      <p>Cadastre um endereço!</p>\n                    )}\n                  </Delivery>\n                ) : (\n                  <p>\n                    <Link to=\"/login\">Entre ou se cadastre!</Link>\n                  </p>\n                )}\n              </DeliveryInfo>\n            </li>\n            <li>\n              {productData.countInStock > 0 ? (\n                <h2>Em estoque!</h2>\n              ) : (\n                <h2>Fora de estoque.</h2>\n              )}\n            </li>\n            <li>\n              {productData.countInStock > 0 ? (\n                <>\n                  <strong>Quantidade:</strong>\n                  <select onChange={(e) => setBuyQuantity(e.target.text)} className=\"quantity\">\n                    {Array.from(Array(productData.countInStock).keys()).map(\n                      (i) => {\n                        return i > 0 && i < 6 && <option>{i}</option>;\n                      }\n                    )}\n                  </select>\n                  <sub>({productData.countInStock} em estoque!)</sub>\n                </>\n              ) : (\n                <></>\n              )}\n            </li>\n            <li>\n              <BuyBtns>\n                <BuyNowBtn type=\"button\" value=\"Comprar agora\" />\n                <AddToCartBtn type=\"button\" value=\"Adicionar ao carrinho\" onClick={() => addToCart()} />\n              </BuyBtns>\n            </li>\n          </ul>\n        </SellerInfo>\n      </SellerInfoWrapper>\n      <Description>{productData.description}</Description>\n      <SimilarProducts>\n        <h3>Produtos semelhantes que você pode gostar:</h3>\n        <ProductsList>\n          {similarProducts.data.slice(0, 4).map((p) => {\n            return (\n              <li>\n                <ProductCard\n                  key={p._id}\n                  imgsrc={p.image}\n                  title={p.name}\n                  brand={p.brand}\n                  price={`R$ ${p.price}`}\n                  portion={`${p.portion}x R$${(p.price / p.portion).toFixed(\n                    2\n                  )} sem juros`}\n                />\n              </li>\n            );\n          })}\n        </ProductsList>\n      </SimilarProducts>\n    </Container>\n  );\n}\n\nexport default DetailsPage;\n"]},"metadata":{},"sourceType":"module"}